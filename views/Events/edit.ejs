<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Update Event</title>
  <link href="https://fonts.googleapis.com/css?family=Tajawal" rel="stylesheet" />
  <link rel="stylesheet" href="https://unpkg.com/bulma@0.8.0/css/bulma.min.css" />
  <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <script defer src="https://use.fontawesome.com/releases/v5.0.7/js/all.js"></script>
  <link rel="stylesheet" type="text/css" href="../../stylesheets/login.css"/>
  <link rel="stylesheet" href="../../stylesheets/footer.css" />
</head>

<body>

  <%- include ("../partials/header") %>
  <section class="hero is-fullheight">
    <div class="hero-body">
      <div class="container">
        <div class="column is-8 is-offset-2">
          <div class="box">
            <p class="subtitle is-4 has-text-grey">
              Change Event Information
            </p>
            <br>
            <form action="/events/<%=events.id%>?_method=PUT" method="POST"  enctype="multipart/form-data">
              <div class="field">
                <div class="control">
                  <input class="input new" type="text" name="name" value="<%=events.name%>" required>
                </div>
              </div>

              <div class="field">
                <div class="control">
                  <input class="input new" type="text" name="eventVenue" value="<%=events.location%>" required>
                </div>
              </div>

              <div class="field">
                <div class="control">
                  <input class="input new" type="text" name="URL" value="<%=events.image%>" required>
                </div>
              </div>

               <div class="field">
                <div class="control">
                  <input class="input new" type="text" name="URL2" value="<%=events.image2%>" required="">
                </div>
              </div>
              <div class="field">
                <div class="columns is-variable is-3">
                  <div class="column is-6">
                    <label for="date" class="label">Event Date (DD-MM-YYYY)</label>
                    <div class="columns is-variable is-1">
                      <div class="column is-one-quarter">
                        <input type="text" id="day" class="input" placeholder="Day" name="day" pattern="(?=.*\d).{1,2}" required>
                      </div>
                      <div class="column is-one-quarter">
                        <input type="text" id="month" class="input" placeholder="Month" name="month" pattern="(?=.*\d).{1,2}" required>
                      </div>
                      <div class="column is-half">
                        <input type="text" id="year" class="input" placeholder="Year" name="year" pattern="(?=.*\d).{4,4}" required>
                      </div>
                    </div>
                  </div>
                  <div class="column is-6">
                    <label for="time" class="label">Time (HH : MM)</label>
                    <div class="field">
                      <div class="columns is-variable is-2">
                        <div class="column is-one-quarter">
                          <input type="text" id="hour" class="input" placeholder="Hour" name="hour" pattern="(?=.*\d).{1,2}" required>
                        </div>
                        <div class="column is-one-quarter">
                          <input type="text" id="minute" class="input" placeholder="Minute" name='minute' pattern="(?=.*\d).{1,2}" required>
                        </div>
                      </div>
                    </div>    
                  </div>
                </div>
              </div>
              <div class="field">
                <label class="label">Event Catagory</label>
                <p class="control">
                </p>
                <div class="select" onchange="selectCateg()">
                  <select id="select" required>
                    <option>Networking</option>
                    <option>Educational</option>
                    <option>Social</option>
                    <option>SciTech</option>
                    <option>Others</option>
                  </select>
                  <p></p>
                </div>
                <input type="hidden" id="categ" name="category" value="<%=events.category%>">
              </div>

              <div class="field">
                <label class="label">Description</label>
                <div class="control">
                  <textarea class="textarea" name="description" spellcheck="false"><%=events.description %></textarea>
                </div>
              </div>


              <div class="field">
                <div id="event-upload" class="file has-name is-fullwidth is-success">
                  <label class="file-label">
                    <input class="file-input" type="file" name="resume" id="image" accept="image/*">
                    <span class="file-cta">
                      <span class="file-icon">
                        <svg class="svg-inline--fa fa-upload fa-w-16" aria-hidden="true" data-prefix="fas"
                          data-icon="upload" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
                          data-fa-i2svg="">
                          <path fill="currentColor"
                            d="M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z">
                          </path>
                        </svg><!-- <i class="fas fa-upload"></i> -->
                      </span>
                      <span class="file-label">
                        Choose a file
                      </span>
                    </span>
                    <span class="file-name">
                      Example_Image.jpg
                    </span>
                  </label>
                </div>
              </div>
              <div class="has-text-centered">
                <button class="button is-info is-large">
                  Update</button>
              </div>
              <br>
            </form>
          </div>
        </div>
      </div>
  </section>

  <script>
    const fileInput = document.querySelector("#event-upload input[type=file]");
    fileInput.onchange = () => {
      if (fileInput.files.length > 0) {
        const fileName = document.querySelector("#event-upload .file-name");
        fileName.textContent = fileInput.files[0].name;
      }
    };
    var options=document.getElementById("select");
    var initialCateg=document.getElementById("categ");
    for(var i=0;i<options.options.length;i++){
      if(options.options[i].value==initialCateg.value){
        options.options[i].selected=true;
      }
    }

    function selectCateg(){
      var selected=options.options[options.selectedIndex].text;
      
      var categ=document.getElementById("categ")
      categ.value=selected;
    }
  </script>

<%- include ("../partials/footer") %>